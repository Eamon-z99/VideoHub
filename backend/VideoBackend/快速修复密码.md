# 快速修复密码问题

## 问题
数据库中的BCrypt密码哈希不正确，导致登录时密码验证失败。

## 解决方案

### 方法1: 运行密码生成工具（推荐）

1. **在IDE中运行 `PasswordGenerator.java`**
   - 打开文件：`backend/VideoBackend/src/main/java/videobackend/video/util/PasswordGenerator.java`
   - 右键点击 `main` 方法
   - 选择 "Run 'PasswordGenerator.main()'"

2. **复制生成的BCrypt哈希**
   - 工具会输出类似：`$2a$10$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`
   - 复制这个完整的哈希值

3. **执行SQL更新语句**
   ```sql
   UPDATE `users` SET `password` = '$2a$10$你复制的哈希值' WHERE `account` = 'test';
   UPDATE `users` SET `password` = '$2a$10$你复制的哈希值' WHERE `account` = 'newuser';
   ```

### 方法2: 使用Maven测试

```bash
cd backend/VideoBackend
mvn test -Dtest=PasswordVerifierTest#verifyPasswords
```

这会：
- 验证当前数据库中的密码哈希
- 生成新的123456的BCrypt密码
- 输出SQL更新语句

### 方法3: 直接使用以下SQL（临时方案）

如果无法运行工具，可以先删除旧用户，然后插入新用户：

```sql
-- 删除旧用户
DELETE FROM `users` WHERE `account` IN ('test', 'newuser');

-- 插入新用户（使用已知的BCrypt哈希）
-- 注意：这个哈希需要是123456的正确BCrypt加密值
INSERT INTO `users` (`username`, `account`, `password`, `email`, `status`, `create_time`, `update_time`) 
VALUES 
('测试用户', 'test', '$2a$10$生成的哈希值', 'test@example.com', 1, NOW(), NOW()),
('新测试用户', 'newuser', '$2a$10$生成的哈希值', 'newuser@example.com', 1, NOW(), NOW());
```

## 验证

更新后，使用以下账号登录测试：
- 账号：`test`
- 密码：`123456`

如果仍然失败，请检查后端控制台的密码验证日志。

